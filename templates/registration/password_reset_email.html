{# templates/registration/password_reset_email.html #}
{% load static %}

{% with header_bg=protocol|add:"://"|add:domain|add:static('img/email.webp') %}
{% with watermark=protocol|add:"://"|add:domain|add:static('img/card-21.webp') %}
{% with reset_url=protocol|add:"://"|add:domain|add:request_path %}

{# Build the confirm path using Django's built-in URL name #}
{% with confirm_path=protocol|add:"://"|add:domain %}
{% endwith %}

<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Reset your MintKit password</title>
  </head>

  <body style="margin:0;padding:0;background:#eaf2ff;font-family:Arial,Helvetica,sans-serif;color:#0b2447;">
    <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="background:#eaf2ff;padding:24px 0;">
      <tr>
        <td align="center" style="padding:0 12px;">
          <table role="presentation" width="680" cellpadding="0" cellspacing="0" style="max-width:680px;width:100%;background:#ffffff;border-radius:16px;overflow:hidden;box-shadow:0 10px 30px rgba(11,36,71,0.10);">
            <!-- Header image -->
            <tr>
              <td style="padding:0;">
                <img src="{{ protocol }}://{{ domain }}{% static 'img/email.webp' %}"
                     alt="MintKit"
                     width="680"
                     style="display:block;width:100%;max-width:680px;height:auto;" />
              </td>
            </tr>

            <!-- Top bar -->
            <tr>
              <td style="background:#dbe9ff;padding:14px 18px;">
                <table role="presentation" width="100%" cellpadding="0" cellspacing="0">
                  <tr>
                    <td style="font-size:13px;color:#1b4f9c;">
                      Digital cards • vouchers • tickets
                    </td>
                    <td align="right">
                      <a href="{{ protocol }}://{{ domain }}/"
                         style="display:inline-block;padding:8px 14px;border:1px solid #2f5fa8;border-radius:999px;text-decoration:none;font-size:13px;color:#0b2447;background:#f3f8ff;">
                        Visit site
                      </a>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>

            <!-- Body -->
            <tr>
              <td style="padding:22px 22px 10px 22px;">
                <h1 style="margin:0 0 10px 0;font-size:22px;line-height:28px;color:#0b2447;">
                  Reset your password
                </h1>

                <p style="margin:0 0 14px 0;font-size:14px;line-height:21px;color:#163a6b;">
                  A password reset was requested for your MintKit account. Use the button below to set a new password.
                </p>

                <p style="margin:0 0 16px 0;">
                  <a href="{{ protocol }}://{{ domain }}{% url 'password_reset_confirm' uidb64=uid token=token %}"
                     style="display:inline-block;background:#2f5fa8;color:#ffffff;text-decoration:none;padding:12px 16px;border-radius:10px;font-size:14px;font-weight:700;">
                    Reset password
                  </a>
                </p>

                <p style="margin:0 0 12px 0;font-size:12px;line-height:18px;color:#4b6fa8;">
                  If the button does not work, copy and paste this link:
                  <br>
                  <a href="{{ protocol }}://{{ domain }}{% url 'password_reset_confirm' uidb64=uid token=token %}"
                     style="color:#1b4f9c;word-break:break-all;">
                    {{ protocol }}://{{ domain }}{% url 'password_reset_confirm' uidb64=uid token=token %}
                  </a>
                </p>

                <!-- Watermark image block (same as Welcome style) -->
                <div style="margin-top:14px;border-radius:12px;overflow:hidden;background:#cfd6df;">
                  <img src="{{ protocol }}://{{ domain }}{% static 'img/card-21.webp' %}"
                       alt=""
                       style="display:block;width:100%;height:auto;opacity:0.55;" />
                </div>
              </td>
            </tr>

            <!-- Footer -->
            <tr>
              <td style="padding:14px 22px 22px 22px;">
                <div style="background:#f1f6ff;border:1px solid #cfe0ff;border-radius:12px;padding:12px 14px;font-size:12px;line-height:18px;color:#163a6b;">
                  Need help? Reply to this email or contact support@mintkit.co.uk.
                  <div style="margin-top:8px;">
                    <a href="{{ protocol }}://{{ domain }}/about/" style="color:#1b4f9c;text-decoration:none;">About</a>
                    &nbsp;•&nbsp;
                    <a href="{{ protocol }}://{{ domain }}/pricing/" style="color:#1b4f9c;text-decoration:none;">Pricing</a>
                    &nbsp;•&nbsp;
                    <a href="{{ protocol }}://{{ domain }}/faq/" style="color:#1b4f9c;text-decoration:none;">FAQ</a>
                  </div>
                </div>

                <div style="margin-top:14px;text-align:center;font-size:12px;color:#6b86b3;">
                  © {% now "Y" %} MintKit. All rights reserved.
                </div>
              </td>
            </tr>

          </table>
        </td>
      </tr>
    </table>
  </body>
</html>

{% endwith %}
{% endwith %}
{% endwith %}
