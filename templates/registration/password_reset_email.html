{# templates/registration/password_reset_email.html #}
{% load static %}
{% now "Y" as year %}
{% extends "emails/base_email.html" %}

{# 
  Keep this template "Django-auth safe":
  - No request_path
  - No custom context required
  - Only uses variables that PasswordResetView provides (protocol, domain, uid, token, site_name, user)
#}

{% block content %}
  {# Absolute URLs for email clients (images often need absolute URLs) #}
  {% with site_root=protocol|add:"://"|add:domain %}
  {% with header_bg_url=site_root|add:static("img/email.webp") %}
  {% with watermark_url=site_root|add:static("img/card-211.webp") %}
  {% with about_url=site_root|add:"/about/" %}
  {% with pricing_url=site_root|add:"/pricing/" %}
  {% with faq_url=site_root|add:"/faq/" %}

  {# Correct Django reset-confirm link #}
  {% with reset_url=site_root|add:password_reset_confirm_url %}

    <h2 style="margin:0 0 10px 0; font-size:22px; color:#0b2a57;">
      Reset your password
    </h2>

    <p style="margin:0 0 14px 0; font-size:14px; line-height:1.55; color:#1e2f4d;">
      A password reset was requested for your MintKit account. Use the button below to set a new password.
    </p>

    <a href="{{ reset_url }}" style="
      display:inline-block;
      padding:12px 16px;
      border-radius:10px;
      background:#2f5fa8;
      color:#ffffff;
      text-decoration:none;
      font-weight:700;
      font-size:14px;
    ">Reset password</a>

    <p style="margin:14px 0 0 0; font-size:12px; line-height:1.45; color:#6b7fa6;">
      If the button does not work, copy and paste this link:
      <br>
      <a href="{{ reset_url }}" style="color:#2f5fa8; word-break:break-all;">{{ reset_url }}</a>
    </p>

  {% endwith %}
  {% endwith %}{% endwith %}{% endwith %}{% endwith %}{% endwith %}
  {% endwith %}{% endwith %}{% endwith %}
{% endblock %}
