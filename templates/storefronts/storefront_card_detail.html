{% extends "base.html" %}

{# Remove the base "page-container" wrapper for this page (same pattern as about.html) #}
{% block main_class %}{% endblock %}

{% block content %}
<style>
    /* Keep the normal site background (do NOT set body background here). */

    /* Inner panel: softly tinted using the storefront bg, with transparency-like effect */
    .mk-card-detail-panel {
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 18px;

        /* Fallback (subtle and slightly transparent) */
        background: rgba(255, 255, 255, 0.86);
    }

    /* Modern browsers: tint the panel using the storefront background colour */
    @supports (background: color-mix(in srgb, red 10%, white)) {
        .mk-card-detail-panel {

            /* Lower % = more subtle tint */
            background: color-mix(in srgb, {
                    {
                    bg|default:"#ffffff"
                }
            }

            14%, white);
    }
    }

    /* Prevent the card image from becoming huge on wide screens */
    .mk-card-detail-image {
        max-width: 760px;
        margin: 0 auto;
    }

    .mk-card-detail-image img {
        width: 100%;
        height: auto;
        max-height: 440px;
        /* keeps it under control */
        object-fit: contain;
        /* no cropping */
        display: block;
        border-radius: 14px;
    }
</style>

<div class="container py-4">
    <div class="mk-card-detail-wrap mx-auto">
        <div class="mk-card-detail-panel shadow-sm">
            <div class="mk-card-detail-inner">

                <div class="mb-4">
                    <a href="{{ storefront.get_absolute_url }}" class="btn btn-link p-0">
                        ‚Üê Back to storefront
                    </a>
                </div>

                <div class="row g-4 align-items-start">
                    <div class="col-12 col-lg-6">
                        <div class="mk-card-detail-image">
                            {% if card.image_url %}
                            <img src="{{ card.image_url }}" alt="{{ card.title|default:'Digital card' }}"
                                loading="lazy">
                            {% else %}
                            <div class="text-muted">No card image provided.</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="col-12 col-lg-6">
                        <h1 class="h3 mb-3">{{ card.title }}</h1>

                        {% if card.price_label %}
                        <div class="fs-4 fw-semibold mb-4">{{ card.price_label }}</div>
                        {% endif %}

                        {% if card.description %}
                        <p class="text-muted mb-4">{{ card.description|linebreaksbr }}</p>
                        {% endif %}

                        {% if card.buy_url %}
                        <a href="{{ card.buy_url }}" class="btn btn-primary" target="_blank" rel="noopener noreferrer">
                            Buy / details
                        </a>
                        {% else %}
                        <p class="text-muted mb-0">No buy/details link was provided for this card.</p>
                        {% endif %}
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
{% endblock %}