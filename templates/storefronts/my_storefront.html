{% extends "base.html" %}

{% block content %}

<header class="sf-header">
  <div class="sf-header-main">
    <h1>My storefront</h1>
    <p class="text-muted">
      This is your public-facing page. Preview how it looks and update the details below.
    </p>
  </div>

  <div class="sf-header-actions">
    {% if storefront.is_active %}
      <span class="sf-badge sf-badge-success">Listed in Explore</span>
    {% else %}
      <span class="sf-badge sf-badge-muted">Hidden from Explore</span>
    {% endif %}

    <a href="{{ public_url }}" target="_blank" rel="noopener" class="btn btn-primary">
      View public storefront
    </a>
  </div>
</header>

<div class="sf-grid">
  <!-- LEFT: PREVIEW -->
  <section class="sf-panel">
    <h2>Preview</h2>

    <div class="sf-preview-card">
      {% if storefront.profile and storefront.profile.logo %}
        <div class="sf-preview-logo">
          <img src="{{ storefront.profile.logo.url }}" alt="{{ storefront.headline }}">
        </div>
      {% endif %}

      <h3>
        {{ storefront.headline|default:"Your storefront headline" }}
      </h3>

      {% if storefront.description %}
        <p>{{ storefront.description|linebreaksbr }}</p>
      {% else %}
        <p class="sf-preview-empty">
          Add a short description to tell customers what your business offers.
        </p>
      {% endif %}

      <div class="sf-preview-section-title">Contact details</div>
      {% if storefront.contact_details %}
        <p>{{ storefront.contact_details|linebreaksbr }}</p>
      {% else %}
        <p class="sf-preview-empty">
          Add contact details so customers can reach you or find your location.
        </p>
      {% endif %}
    </div>

    <!-- URL note sits *below* the preview card -->
    <p class="sf-preview-url text-muted">
      Customers will see this page at
      <a href="{{ public_url }}" target="_blank" rel="noopener">
        {{ public_url }}
      </a>.
    </p>

    <!-- Simple placeholder section for featured cards (layout only for now) -->
    <section class="sf-card-section">
      <div class="sf-card-section-heading">
        <h3>Featured digital cards</h3>
      </div>
      <p class="text-muted sf-card-section-text">
        This shows how your gift cards, tickets or vouchers could appear to
        customers. In a full MintKit setup, these cards would be created in
        MintKit Studio and linked to this storefront.
      </p>

      <div class="sf-card-grid">
        <article class="sf-card">
          <div>
            <div class="sf-card-title">Example card 1</div>
            <div class="sf-card-subtitle">e.g. 1:1s gift card or “Drop-in yoga pass”.</div>
            <p class="sf-card-desc">
              Space for a short description of what this card includes, expiry rules, and how it can be used.
            </p>
          </div>
          <div class="sf-card-footer">
            <div class="sf-card-price">£25.00</div>
            <a href="#" class="btn btn-secondary btn-xs">Buy card</a>
          </div>
        </article>

        <article class="sf-card">
          <div>
            <div class="sf-card-title">Example card 2</div>
            <div class="sf-card-subtitle">e.g. “10-session class bundle”.</div>
            <p class="sf-card-desc">
              Another example layout for a multi-session pass, bundle, or membership-style product.
            </p>
          </div>
          <div class="sf-card-footer">
            <div class="sf-card-price">£75.00</div>
            <a href="#" class="btn btn-secondary btn-xs">Buy card</a>
          </div>
        </article>

        <article class="sf-card">
          <div>
            <div class="sf-card-title">Example card 3</div>
            <div class="sf-card-subtitle">e.g. “Event ticket with QR code”.</div>
            <p class="sf-card-desc">
              Placeholder for a simple event ticket or time-limited voucher that would show a QR code on the real card.
            </p>
          </div>
          <div class="sf-card-footer">
            <div class="sf-card-price">£15.00</div>
            <a href="#" class="btn btn-secondary btn-xs">Buy card</a>
          </div>
        </article>
      </div>
    </section>
  </section>

  <!-- RIGHT: EDIT FORM -->
  <section class="sf-panel">
    <h2>Edit storefront details</h2>
    <p class="text-muted">
      Update the text shown on your public page. You can toggle public visibility here as well.
    </p>

    <form method="post">
      {% csrf_token %}
      {{ form.non_field_errors }}

      <div class="sf-form-row">
        <label for="{{ form.headline.id_for_label }}">Storefront headline:</label>
        {{ form.headline }}
        <div class="sf-form-help">
          Shown as the main title of your storefront.
        </div>
      </div>

      <div class="sf-form-row">
        <label for="{{ form.description.id_for_label }}">Description:</label>
        {{ form.description }}
        <div class="sf-form-help">
          Appears as the main body text on your storefront page.
        </div>
      </div>

      <div class="sf-form-row">
        <label for="{{ form.contact_details.id_for_label }}">Contact details:</label>
        {{ form.contact_details }}
        <div class="sf-form-help">
          These details help customers contact or find you.
        </div>
      </div>

      <div class="sf-form-row">
        <div class="sf-form-inline">
          <label class="sf-checkbox-label">
            {{ form.is_active }}
            <span>Make my storefront public</span>
          </label>
        </div>
        <div class="sf-form-help">
          Tick this when you're ready for customers to see your page.
        </div>
      </div>

      <button type="submit" class="btn btn-primary">
        Save storefront
      </button>
    </form>
  </section>
</div>

{% endblock %}
