{# templates/studio_bridge/card_viewer.html #}
{% extends "base.html" %}

{% block content %}
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10">

      <div class="card shadow-sm border-0">
        <div class="card-body p-3 p-md-4">

          <h1 class="h3 fw-bold mb-2">You've received a MintKit card</h1>
          <p class="text-muted mb-4">
            Use the QR code below to redeem, or open the viewer link from your email.
          </p>

          <div class="row g-4 align-items-start">
            <div class="col-12 col-md-7">
              {% if link.image_url %}
                <div class="rounded-4 overflow-hidden bg-light">
                  <img
                    src="{{ link.image_url }}"
                    alt="Card preview"
                    class="img-fluid w-100 d-block"
                    style="height:auto;"
                  >
                </div>
              {% else %}
                <div class="rounded-4 bg-light border d-flex align-items-center justify-content-center" style="min-height: 220px;">
                  <span class="text-muted small">Preview unavailable</span>
                </div>
              {% endif %}
            </div>

            <div class="col-12 col-md-5">
              <div class="rounded-4 border bg-white p-3 text-center">
                <div class="fw-semibold mb-2">Show this QR to redeem</div>

                {% if qr_code_data_uri %}
                  <img
                    src="{{ qr_code_data_uri }}"
                    alt="Redemption QR code"
                    class="img-fluid"
                    style="max-width: 320px; width: 100%; height: auto;"
                  >
                {% else %}
                  <div class="text-muted small">
                    QR preview unavailable (missing server dependency).
                  </div>
                {% endif %}

                <div class="mt-3 small text-muted text-break">
                  <div class="mb-1">Manual code:</div>
                  <code class="d-inline-block">{{ manual_code }}</code>
                </div>
              </div>

              <div class="mt-3 small text-muted text-break">
                Card ID: {{ link.nft_id }}
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}
